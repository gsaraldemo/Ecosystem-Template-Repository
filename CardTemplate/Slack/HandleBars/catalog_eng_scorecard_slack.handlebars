{
"type": "customPayload",
"actual_payload":{
"blocks": [
	{
		"type": "section",
		{{setVar "fieldsNeeded" "false"}}
		{{#each message}}
			{{setVar "failure" "true"}}
			{{#each this.data.service.scorecards.edges}}{{#if (ifEq this.node.scorecardSummaries.nodes.0.Status 'https://pluspng.com/img-png/red-cross-png-red-cross-png-file-2000.png')}}{{setVar "failure" "true"}}{{/if}}{{/each}}
			{{#if (ifEq failure 'true')}}
				{{!--found something wrong, should start fields--}}
				{{#if (ifEq filedsNeeded 'true')}}
					,
				{{else}}
					{{setVar "fieldsNeeded" "true"}}
					"fields": [
				{{/if}}
					{
                				"type": "mrkdwn",
                				"text": "*Status/Description*\n{{#each this.data.service.scorecards.edges}}{{#if (ifEq this.node.scorecardSummaries.nodes.0.Status 'https://pluspng.com/img-png/red-cross-png-red-cross-png-file-2000.png')}}{{setVar "failure" "true"}}\u2716{{else}}\u2714{{/if}} {{truncate this.node.description}}\n{{/each}}"
					},
              				{
                				"type": "mrkdwn",
                				"text": "*Score/Max Score*\n{{#each this.data.service.scorecards.edges}}{{this.node.scorecardSummaries.nodes.0.score}}/{{this.node.scorecardSummaries.nodes.0.maxScore}}\n{{/each}}"
              				}
			{{else}}
				{{!-- add the service name to hurray message--}}
			{{/if}}
		{{/each}}
		{{#if (ifEq filedsNeeded 'true')}}
			],
		{{/if}}
		"text": {
			"type": "mrkdwn",
			{{#if (ifEq failure "true")}}
			"text": "Hurray everything passed {{fieldsNeeded}} {{failure}} test"
			{{else}}
			"text": "t passed {{fieldsNeeded}} {{failure}} test"
			{{/if}}
		}
	}
   ]
  }
}
